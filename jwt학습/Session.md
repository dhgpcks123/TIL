# session

1. 유저가 web 브라우저를 통해 네이버 서버에 접속한다
2. www.naver.com (get) 요청 --> 서버는 해당 주소에 맞는 컨트롤러 메서드를 찾는다.
3. 메서드에서 .html 파일을 return 해준다.
   이 대 HTTP header에 sessionId를 저장하도록 한다

```
   ---- HTTP header ---
  ㅣ  쿠키 : sessionId  ㅣ
   --------------------
```

3-1. 최초요청시에 생성!

3-2. 최초 요청이 아니라면 쿠키의 sessionId를 갖고 감  
그러면 서버에서 리턴할 때 sessionId를 그대로 줌  
서버는 sessionId를 줄 때 마다 목록을 만들어서 저장하며  
클라이언트가 요청 시 목록을 확인한다

```
클라이언트 ------------------- 서버
        1.페이지 요청 request
        -------------------> 2.세션 서버에 세션ID 저장 : 1234
        3.세션ID:1234 전달
4.저장   <------------------
        5.로그인요청(세션ID포함)
        ------------------> 6.DB에 아이디 확인
                            7.세션ID:1234에 user정보 저장
        8.메인 페이지로 이동
        <-----------------
        ==================
        9.추가 정보 요청(세션ID)
        -----------------> 10. 세션DB에 세션ID 확인
        11.요청 응답
        <-----------------
```

## session 없어지는 경우?

- 서버에서 삭제하는 경우 (서버 쪽 목록에서 지운다)
- 사용자가 브라우저 종료
- 특정 시간 이후 서버 목록에서 삭제

세션 : 로그인 요청 시 인증을 위해 많이 사용된다

## session의 단점

- 요청하는 클라이언트가 너무 많은 경우(동접자 너무 많으면...) 서버 과부하  
  -> 그래서 서버를 여러 대 두기도 함(로드 밸런싱)  
  -> A서버에 세션 저장했는데 너무 요청 많아서 B서버 요청?..  
  세션 저장하는 서버 사용하기도 함(Redis),
