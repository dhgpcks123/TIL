# 유효성 검사 어디서 하는 게 좋을까?
컨트롤러에서 값 넘어올 때 @Valid로 해주면 좋다고 생각했다.

1. 컨트롤러에서 서비스로 정상값이 전달 될 것이라는 가정으로 코드를 작성하는 것은 좋지않다
2. 프로그래머의 실수로 레이어마다 유효성 검사의 책임을 갖는 게 좋다.
3. 데이터 저장소 상태가 애플리케이션에 의해 손상되지 않도록 보장할 수 있다.
4. 엔터티를 조작하는 서비스가 있는 경우 사용자가 알지 못하는 사이에 엔티티 손상



5. 다음과 같이 생각할 수 있습니다. "좋아, 유효성 검사 주석을 DTO에서 엔터티로 이동하면 모두 문제가 없을 것입니다."
엔터티에서만 유효성을 검사하면 들어오는 요청과 서비스 계층 모두로부터 안전하지만 성능 문제가 있을 수 있습니다.
자, 사용자 이름이 null이고 엔터티에서만 유효성을 검사하는 경우 이는 다음을 의미합니다.

거래를 시작했습니다
항목을 로드했습니다.
엔티티를 변경했습니다.
지속성 컨텍스트를 플러시했습니다.
트랜잭션 롤백
이러한 작업 중 대부분은 비용이 많이 들 수 있으며 이전에 사용자 이름의 유효성을 검사했다면 아무 것도 하지 않았을 때 그냥 휴지통에 버리기 위해 모든 작업을 수행했습니다.

